# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

###1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
>Linux
>>```vagrant@vagrant:~$ ip -br a
>> lo               UNKNOWN        127.0.0.1/8 ::1/128
>> eth0             UP             10.0.2.15/24 fe80::a00:27ff:fe73:60cf/64
>> eth1             UP             172.17.8.73/24 fe80::a00:27ff:fef8:274c/64```
> 
> Windows
> 
>>C:\Users\aitov>ipconfig
>>Настройка протокола IP для Windows
>>
>>```Адаптер Ethernet Npcap Loopback Adapter:
>>   DNS-суффикс подключения . . . . . :
>>   Локальный IPv6-адрес канала . . . : fe80::19d1:70ac:a0f3:afa2%10
>>   IPv4-адрес. . . . . . . . . . . . : 192.168.56.1
>>   Маска подсети . . . . . . . . . . : 255.255.255.0
>>   Основной шлюз. . . . . . . . . :
>>Адаптер беспроводной локальной сети Беспроводная сеть:
>>   Состояние среды. . . . . . . . : Среда передачи недоступна.
>>   DNS-суффикс подключения . . . . . : glos.local
>>Адаптер беспроводной локальной сети Подключение по локальной сети* 1:
>>   Состояние среды. . . . . . . . : Среда передачи недоступна.
>>   DNS-суффикс подключения . . . . . :
>>Адаптер беспроводной локальной сети Подключение по локальной сети* 10:
>>   Состояние среды. . . . . . . . : Среда передачи недоступна.
>>   DNS-суффикс подключения . . . . . :
>>Адаптер Ethernet Ethernet:
>>   DNS-суффикс подключения . . . . . : glos.local
>>   IPv4-адрес. . . . . . . . . . . . : 172.17.8.71
>>   Маска подсети . . . . . . . . . . : 255.255.255.0
>>   Основной шлюз. . . . . . . . . : 172.17.8.1
>>Адаптер Ethernet Сетевое подключение Bluetooth:
>>   Состояние среды. . . . . . . . : Среда передачи недоступна.
>>   DNS-суффикс подключения . . . . . :```
> 
>
###2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
> LLDP (Link Local Discovery Protocol) - Протокол канального уровня, определяет соседа и обменивается своими характеристиками.
> В линуксе для использоватния требуется установить пакет LLDP и SNMP
> ПРимер вывода команды
> ```commandline
> vagrant@vagrant:~$ lldpcli show neighbors
> -------------------------------------------------------------------------------
> LLDP neighbors:
> -------------------------------------------------------------------------------
> Interface:    eth1, via: LLDP, RID: 1, Time: 0 day, 00:02:05
>   Chassis:
>     ChassisID:    mac ac:1f:6b:ef:cb:51
>   Port:
>     PortID:       mac ac:1f:6b:ef:cb:51
>     TTL:          121
> -------------------------------------------------------------------------------
> Interface:    eth1, via: LLDP, RID: 2, Time: 0 day, 00:02:04
>   Chassis:
>     ChassisID:    mac 08:55:31:02:76:fc
>     SysName:      MikroTik
>     SysDescr:     MikroTik RouterOS 6.48.1 (stable) RBcAPGi-5acD2nD
>     MgmtIP:       172.17.8.61
>     Capability:   Bridge, on
>     Capability:   Router, on
>     Capability:   Wlan, on
>   Port:
>     PortID:       ifname bridge1/ether1
>     TTL:          120
> -------------------------------------------------------------------------------
> Interface:    eth1, via: LLDP, RID: 3, Time: 0 day, 00:02:03
>   Chassis:
>     ChassisID:    mac 08:55:31:02:79:18
>     SysName:      MikroTik
>     SysDescr:     MikroTik RouterOS 6.48.1 (stable) RBcAPGi-5acD2nD
>     MgmtIP:       172.17.8.28
>     Capability:   Bridge, on
>     Capability:   Router, on
>     Capability:   Wlan, on
>   Port:
>     PortID:       ifname bridgeLocal/ether1
>     TTL:          120
> -------------------------------------------------------------------------------
> Interface:    eth1, via: LLDP, RID: 4, Time: 0 day, 00:01:35
>   Chassis:
>     ChassisID:    ip 172.17.8.21
>     SysName:      SIP-T19P_E2
>     SysDescr:     53.84.0.15
>     Capability:   Bridge, on
>     Capability:   Tel, on
>   Port:
>     PortID:       mac 00:15:65:bf:01:80
>     PortDescr:    WAN PORT
>     TTL:          180
> -------------------------------------------------------------------------------
> Interface:    eth1, via: LLDP, RID: 5, Time: 0 day, 00:01:20
>   Chassis:
>     ChassisID:    mac c4:ad:34:7e:86:77
>     SysName:      GLS
>    SysDescr:     MikroTik RouterOS 6.47.8 (stable) RB2011UiAS-2HnD
>     MgmtIP:       172.17.8.1
>     MgmtIP:       fe80::c6ad:34ff:fe7e:8675
>     Capability:   Bridge, on
>     Capability:   Router, on
>   Port:
>     PortID:       ifname bridge/ether5
>     TTL:          120
> -------------------------------------------------------------------------------```

###3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
>Для разделения коммутатора на вирутальные сети используется технология VLAN. На порт доступа навешивается тег, тег уходит в транк, на стороне принимающей на транк приходит тегированый трафик, коммутатор снимает тэг на порту доступа.
>Linux требует установленного пакета vlan, конкретно утилиту vconfig. Чтобы VLAN поднимался автоматом, настройки прописываются в /etc/network/interfaces
>Конфиг интерфейса (Пример):
> ```commandline
> #Interface eth0 - Не тегированный интерфейс 
> auto eth0
> iface eth0 inet static
>       address 192.168.1.2
>       netmask 255.255.255.0
>       gateway 192.168.1.1
>       dns-nameservers 8.8.8.8
> #Interface eth0.200 - Виртуальный интерфейс с тегом 200, повешаный на eth0, со своим адресом. ОБрабатывает только тегированный трафик с тэгом 200
> auto eth0.200
> iface eth0.200 inet static
>       address 192.168.2.2
>       netmask 255.255.255.0
>```

###4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
>Для поддержки агрегации канала используется драйвер bonding
>Mode-0(balance-rr) – режим по умолчанию. Балансировка и отказоустойчивость, Интерфейсы выбираются последовательно, от 1 до последнего и по кругу.
>Mode-1(active-backup) – резервирование интерфейса, 1 активный, другие подключаются при отказе. 
>Mode-2(balance-xor) – балансировка по типу трафика.
>Mode-3(broadcast) – дублирование входящего трафика на все интерфейсы (типа мультикаст)
>Mode-4(802.3ad) – Динамическое объединение портов.
>Mode-5(balance-tlb) – балансировка в зависимости от загруженности канала.
>Mode-6(balance-alb) – более продивутный алгоритм чем Mode-5.
> 
> пример конфига /etc/network/interfaces
>```commandline
>
># создаем логический интерфейс bond0 и назначаем ему адрес
>auto bond0
>iface bond0 inet static
>    address 192.168.1.2
>    netmask 255.255.255.0    
>    gateway 192.168.1.1
>    dns-nameservers 192.168.1.1 8.8.8.8
>        slaves eth0 eth1 #реальные, агрегируемые интерфейсы
>        bond_mode 0 #режим агрегации (MOde-0 дефолт)
>        bond-miimon 100 #интервал проверки линка в миллисекундах
>        bond_downdelay 200 #задержка установки соединения
>        bound_updelay 200 #задержка обрыва соединения
>``` 
 
###5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.
> /29 имеет 8 адресо и 6 хостов
>```commandline
>vagrant@vagrant:~$ ipcalc 192.168.1.0/29 | grep Host
>HostMin:   192.168.1.1          11000000.10101000.00000001.00000 001
>HostMax:   192.168.1.6          11000000.10101000.00000001.00000 110
>Hosts/Net: 6                     Class C, Private Internet
>```
>в 24 сети может быть 32 29 сети :)
> 
> пример 10.10.10.0/29
 ```commandline
vagrant@vagrant:~$ ipcalc 10.10.10.0/24 --s 6 -b
Address:   10.10.10.0
Netmask:   255.255.255.0 = 24
Wildcard:  0.0.0.255
=>
Network:   10.10.10.0/24
HostMin:   10.10.10.1
HostMax:   10.10.10.254
Broadcast: 10.10.10.255
Hosts/Net: 254                   Class A, Private Internet

1. Requested size: 6 hosts
Netmask:   255.255.255.248 = 29
Network:   10.10.10.0/29
HostMin:   10.10.10.1
HostMax:   10.10.10.6
Broadcast: 10.10.10.7
Hosts/Net: 6                     Class A, Private Internet
```
```commandline
vagrant@vagrant:~$ ipcalc 10.10.10.54/29 -b
Address:   10.10.10.54
Netmask:   255.255.255.248 = 29
Wildcard:  0.0.0.7
=>
Network:   10.10.10.48/29
HostMin:   10.10.10.49
HostMax:   10.10.10.54
Broadcast: 10.10.10.55
Hosts/Net: 6                     Class A, Private Internet

```

###6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
>100.64.0.0 — 100.127.255.255 (маска подсети: 255.192.0.0 или /10) Carrier-Grade NAT - можно использовать эти сети. ipcalc рекомендует 26 маску :)
```commandline
vagrant@vagrant:~$ ipcalc 100.64.0.0/24 --s 50 -b
Address:   100.64.0.0
Netmask:   255.255.255.0 = 24
Wildcard:  0.0.0.255
=>
Network:   100.64.0.0/24
HostMin:   100.64.0.1
HostMax:   100.64.0.254
Broadcast: 100.64.0.255
Hosts/Net: 254                   Class A

1. Requested size: 50 hosts
Netmask:   255.255.255.192 = 26
Network:   100.64.0.0/26
HostMin:   100.64.0.1
HostMax:   100.64.0.62
Broadcast: 100.64.0.63
Hosts/Net: 62                    Class A

Needed size:  64 addresses.
Used network: 100.64.0.0/26

```

###7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
>windows
```commandline
arp -a #выводит содержимое таблицы ARP.
arp -d <host> #удаляет запись, соответствующую хосту.
arp -d -a #удаляет все записи таблицы.
```
>Linux
```commandline
ip neigh show #выводит содержимое таблицы ARP. 
ip neigh flush #удаляет запись, соответствующую хосту.
ip neigh del <interface> <host> #удаляет все записи таблицы.
```